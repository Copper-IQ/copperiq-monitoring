{"annotations":{"list":[{"builtIn":1,"datasource":{"type":"grafana","uid":"-- Grafana --"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"editable":true,"fiscalYearStartMonth":0,"graphTooltip":1,"id":null,"links":[{"asDropdown":false,"icon":"dashboard","includeVars":true,"keepTime":true,"tags":[],"targetBlank":false,"title":"Back to Overview","type":"link","url":"/d/infrastructure-overview"},{"asDropdown":false,"icon":"external link","includeVars":true,"keepTime":true,"tags":[],"targetBlank":false,"title":"Billing Revenue","type":"link","url":"/d/content-platform-billing"},{"asDropdown":false,"icon":"external link","includeVars":true,"keepTime":true,"tags":[],"targetBlank":false,"title":"N8N Integration","type":"link","url":"/d/content-platform-n8n"}],"liveNow":false,"panels":[{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Total pipeline executions in the selected time range","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"short"}},"gridPos":{"h":4,"w":6,"x":0,"y":0},"id":1,"options":{"colorMode":"value","graphMode":"area","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"value"},"pluginVersion":"10.0.0","targets":[{"expr":"sum(copperiq_pipeline_execution_total{namespace=\"$namespace\"})","refId":"A"}],"title":"Total Pipelines Executed","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Pipeline success rate percentage","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"red","value":null},{"color":"orange","value":90},{"color":"green","value":95}]},"unit":"percent"}},"gridPos":{"h":4,"w":6,"x":6,"y":0},"id":2,"options":{"colorMode":"value","graphMode":"area","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"value"},"pluginVersion":"10.0.0","targets":[{"expr":"sum(copperiq_pipeline_execution_total{namespace=\"$namespace\",status=\"succeeded\"}) / sum(copperiq_pipeline_execution_total{namespace=\"$namespace\"}) * 100","refId":"A"}],"title":"Pipeline Success Rate","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Average pipeline execution duration","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":1800},{"color":"red","value":3600}]},"unit":"s"}},"gridPos":{"h":4,"w":6,"x":12,"y":0},"id":3,"options":{"colorMode":"value","graphMode":"area","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"value"},"pluginVersion":"10.0.0","targets":[{"expr":"rate(copperiq_pipeline_execution_duration_seconds_sum{namespace=\"$namespace\"}[5m]) / rate(copperiq_pipeline_execution_duration_seconds_count{namespace=\"$namespace\"}[5m])","refId":"A"}],"title":"Avg Pipeline Duration","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Total node executions across all pipelines","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"blue","value":null}]},"unit":"short"}},"gridPos":{"h":4,"w":6,"x":18,"y":0},"id":4,"options":{"colorMode":"value","graphMode":"area","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"value"},"pluginVersion":"10.0.0","targets":[{"expr":"sum(copperiq_pipeline_node_execution_total{namespace=\"$namespace\"})","refId":"A"}],"title":"Total Nodes Executed","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Pipeline execution rate over time","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":20,"gradientMode":"none","hideFrom":{"tooltip":false,"viz":false,"legend":false},"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"short"}},"gridPos":{"h":8,"w":12,"x":0,"y":4},"id":5,"options":{"legend":{"calcs":["lastNotNull"],"displayMode":"table","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"10.0.0","targets":[{"expr":"sum by (pipeline_key) (rate(copperiq_pipeline_execution_total{namespace=\"$namespace\"}[5m]))","legendFormat":"{{pipeline_key}}","refId":"A"}],"title":"Pipeline Execution Rate by Type","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Success vs failure counts by pipeline type","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":20,"gradientMode":"none","hideFrom":{"tooltip":false,"viz":false,"legend":false},"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"normal"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"short"},"overrides":[{"matcher":{"id":"byRegexp","options":"/.*failed.*/"},"properties":[{"id":"color","value":{"fixedColor":"red","mode":"fixed"}}]},{"matcher":{"id":"byRegexp","options":"/.*succeeded.*/"},"properties":[{"id":"color","value":{"fixedColor":"green","mode":"fixed"}}]}]},"gridPos":{"h":8,"w":12,"x":12,"y":4},"id":6,"options":{"legend":{"calcs":["lastNotNull"],"displayMode":"table","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"10.0.0","targets":[{"expr":"sum by (pipeline_key, status) (rate(copperiq_pipeline_execution_total{namespace=\"$namespace\"}[5m]))","legendFormat":"{{pipeline_key}} - {{status}}","refId":"A"}],"title":"Pipeline Success vs Failure Rate","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Average node execution duration by node type","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":20,"gradientMode":"none","hideFrom":{"tooltip":false,"viz":false,"legend":false},"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"s"}},"gridPos":{"h":8,"w":12,"x":0,"y":12},"id":7,"options":{"legend":{"calcs":["lastNotNull","mean"],"displayMode":"table","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"10.0.0","targets":[{"expr":"rate(copperiq_pipeline_node_execution_duration_seconds_sum{namespace=\"$namespace\"}[5m]) / rate(copperiq_pipeline_node_execution_duration_seconds_count{namespace=\"$namespace\"}[5m])","legendFormat":"{{node_id}}","refId":"A"}],"title":"Node Execution Duration by Type","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Node execution count breakdown by type and status","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"auto","cellOptions":{"type":"auto"},"inspect":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"short"},"overrides":[{"matcher":{"id":"byName","options":"Status"},"properties":[{"id":"custom.width","value":120}]}]},"gridPos":{"h":8,"w":12,"x":12,"y":12},"id":8,"options":{"cellHeight":"sm","footer":{"countRows":false,"fields":"","reducer":["sum"],"show":false},"showHeader":true,"sortBy":[{"desc":true,"displayName":"Value"}]},"pluginVersion":"10.0.0","targets":[{"expr":"sum by (node_id, status) (copperiq_pipeline_node_execution_total{namespace=\"$namespace\"})","format":"table","instant":true,"refId":"A"}],"title":"Node Execution Count by Type","transformations":[{"id":"organize","options":{"excludeByName":{"Time":true},"indexByName":{"node_id":0,"status":1,"Value":2},"renameByName":{"node_id":"Node Type","status":"Status","Value":"Count"}}}],"type":"table"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Distribution of pipeline execution durations","fieldConfig":{"defaults":{"custom":{"hideFrom":{"tooltip":false,"viz":false,"legend":false},"scaleDistribution":{"type":"linear"}}}},"gridPos":{"h":8,"w":24,"x":0,"y":20},"id":9,"options":{"calculate":false,"cellGap":2,"cellValues":{},"color":{"exponent":0.5,"fill":"dark-orange","mode":"scheme","reverse":false,"scale":"exponential","scheme":"Spectral","steps":64},"exemplars":{"color":"rgba(255,0,255,0.7)"},"filterValues":{"le":1E-09},"legend":{"show":true},"rowsFrame":{"layout":"auto"},"tooltip":{"show":true,"yHistogram":false},"yAxis":{"axisPlacement":"left","reverse":false,"unit":"s"}},"pluginVersion":"10.0.0","targets":[{"expr":"sum by (le, pipeline_key) (rate(copperiq_pipeline_node_execution_duration_seconds_bucket{namespace=\"$namespace\"}[5m]))","format":"heatmap","legendFormat":"{{pipeline_key}}","refId":"A"}],"title":"Node Execution Duration Heatmap","type":"heatmap"}],"refresh":"30s","schemaVersion":38,"style":"dark","tags":["content-platform","pipelines","metrics"],"templating":{"list":[{"current":{"selected":false,"text":"content-platform-accept","value":"content-platform-accept"},"description":"Select Content Platform environment","hide":0,"includeAll":false,"label":"Environment","multi":false,"name":"namespace","options":[{"selected":true,"text":"content-platform-accept","value":"content-platform-accept"},{"selected":false,"text":"content-platform-prod","value":"content-platform-prod"}],"query":"content-platform-accept,content-platform-prod","queryValue":"","skipUrlSync":false,"type":"custom"},{"current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":{"type":"prometheus","uid":"prometheus"},"definition":"label_values(copperiq_pipeline_execution_total{namespace=\"$namespace\"}, pipeline_key)","hide":0,"includeAll":true,"label":"Pipeline Type","multi":true,"name":"pipeline_key","options":[],"query":{"query":"label_values(copperiq_pipeline_execution_total{namespace=\"$namespace\"}, pipeline_key)","refId":"StandardVariableQuery"},"refresh":1,"regex":"","skipUrlSync":false,"sort":1,"type":"query"},{"current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":{"type":"prometheus","uid":"prometheus"},"definition":"label_values(copperiq_pipeline_node_execution_total{namespace=\"$namespace\"}, node_id)","hide":0,"includeAll":true,"label":"Node Type","multi":true,"name":"node_id","options":[],"query":{"query":"label_values(copperiq_pipeline_node_execution_total{namespace=\"$namespace\"}, node_id)","refId":"StandardVariableQuery"},"refresh":1,"regex":"","skipUrlSync":false,"sort":1,"type":"query"}]},"time":{"from":"now-24h","to":"now"},"timepicker":{},"timezone":"","title":"Content Platform - Pipeline Execution","uid":"content-platform-pipelines","version":1,"weekStart":"","meta":{"folderTitle":"Content Platform"}}