{"annotations":{"list":[{"builtIn":1,"datasource":{"type":"grafana","uid":"-- Grafana --"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"editable":true,"fiscalYearStartMonth":0,"graphTooltip":1,"id":null,"links":[{"asDropdown":false,"icon":"dashboard","includeVars":true,"keepTime":true,"tags":[],"targetBlank":false,"title":"Back to Overview","type":"link","url":"/d/infrastructure-overview"},{"asDropdown":false,"icon":"external link","includeVars":true,"keepTime":true,"tags":[],"targetBlank":false,"title":"Pipeline Execution","type":"link","url":"/d/content-platform-pipelines"},{"asDropdown":false,"icon":"external link","includeVars":true,"keepTime":true,"tags":[],"targetBlank":false,"title":"Billing Revenue","type":"link","url":"/d/content-platform-billing"}],"liveNow":false,"panels":[{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Percentage of successful webhook calls","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"red","value":null},{"color":"orange","value":90},{"color":"yellow","value":95},{"color":"green","value":98}]},"unit":"percent"}},"gridPos":{"h":6,"w":8,"x":0,"y":0},"id":1,"options":{"orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"10.0.0","targets":[{"expr":"sum(rate(copperiq_n8n_webhook_calls_total{namespace=\"$namespace\"}{status=\"success\"}[5m])) / sum(rate(copperiq_n8n_webhook_calls_total{namespace=\"$namespace\"}[5m])) * 100","refId":"A"}],"title":"Webhook Success Rate","type":"gauge"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Total webhook calls made","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"blue","value":null}]},"unit":"short"}},"gridPos":{"h":6,"w":8,"x":8,"y":0},"id":2,"options":{"colorMode":"value","graphMode":"area","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"value_and_name"},"pluginVersion":"10.0.0","targets":[{"expr":"sum(copperiq_n8n_webhook_calls_total{namespace=\"$namespace\"})","refId":"A"}],"title":"Total Webhook Calls","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Average webhook call duration","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":5},{"color":"red","value":10}]},"unit":"s"}},"gridPos":{"h":6,"w":8,"x":16,"y":0},"id":3,"options":{"colorMode":"value","graphMode":"area","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"value_and_name"},"pluginVersion":"10.0.0","targets":[{"expr":"rate(copperiq_n8n_webhook_duration_seconds{namespace=\"$namespace\"}_sum[5m]) / rate(copperiq_n8n_webhook_duration_seconds{namespace=\"$namespace\"}_count[5m])","refId":"A"}],"title":"Avg Webhook Duration","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Webhook call duration by workflow","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":20,"gradientMode":"none","hideFrom":{"tooltip":false,"viz":false,"legend":false},"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"s"}},"gridPos":{"h":8,"w":12,"x":0,"y":6},"id":4,"options":{"legend":{"calcs":["lastNotNull","mean","max"],"displayMode":"table","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"10.0.0","targets":[{"expr":"rate(copperiq_n8n_webhook_duration_seconds{namespace=\"$namespace\"}_sum[5m]) / rate(copperiq_n8n_webhook_duration_seconds{namespace=\"$namespace\"}_count[5m])","legendFormat":"{{workflow_id}}","refId":"A"}],"title":"Webhook Duration by Workflow","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Webhook call volume (success and errors)","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":20,"gradientMode":"none","hideFrom":{"tooltip":false,"viz":false,"legend":false},"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"normal"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"short"},"overrides":[{"matcher":{"id":"byRegexp","options":"/.*error.*/"},"properties":[{"id":"color","value":{"fixedColor":"red","mode":"fixed"}}]},{"matcher":{"id":"byRegexp","options":"/.*success.*/"},"properties":[{"id":"color","value":{"fixedColor":"green","mode":"fixed"}}]}]},"gridPos":{"h":8,"w":12,"x":12,"y":6},"id":5,"options":{"legend":{"calcs":["sum"],"displayMode":"table","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"10.0.0","targets":[{"expr":"sum by (status) (rate(copperiq_n8n_webhook_calls_total{namespace=\"$namespace\"}[5m]))","legendFormat":"{{status}}","refId":"A"}],"title":"Webhook Call Volume","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Error rate by workflow (only showing workflows with errors)","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"auto","cellOptions":{"type":"auto"},"inspect":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":0.01},{"color":"red","value":0.05}]},"unit":"percentunit"},"overrides":[{"matcher":{"id":"byName","options":"Error Rate"},"properties":[{"id":"custom.width","value":150}]}]},"gridPos":{"h":8,"w":12,"x":0,"y":14},"id":6,"options":{"cellHeight":"sm","footer":{"countRows":false,"fields":"","reducer":["sum"],"show":false},"showHeader":true,"sortBy":[{"desc":true,"displayName":"Error Rate"}]},"pluginVersion":"10.0.0","targets":[{"expr":"sum by (workflow_id) (rate(copperiq_n8n_webhook_calls_total{namespace=\"$namespace\"}{status=\"error\"}[5m])) / sum by (workflow_id) (rate(copperiq_n8n_webhook_calls_total{namespace=\"$namespace\"}[5m]))","format":"table","instant":true,"refId":"A"}],"title":"Error Rate by Workflow","transformations":[{"id":"organize","options":{"excludeByName":{"Time":true},"indexByName":{"workflow_id":0,"Value":1},"renameByName":{"workflow_id":"Workflow","Value":"Error Rate"}}}],"type":"table"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Distribution of webhook call durations","fieldConfig":{"defaults":{"custom":{"hideFrom":{"tooltip":false,"viz":false,"legend":false},"scaleDistribution":{"type":"linear"}}}},"gridPos":{"h":8,"w":12,"x":12,"y":14},"id":7,"options":{"calculate":false,"cellGap":2,"cellValues":{},"color":{"exponent":0.5,"fill":"dark-orange","mode":"scheme","reverse":false,"scale":"exponential","scheme":"Spectral","steps":64},"exemplars":{"color":"rgba(255,0,255,0.7)"},"filterValues":{"le":1E-09},"legend":{"show":true},"rowsFrame":{"layout":"auto"},"tooltip":{"show":true,"yHistogram":false},"yAxis":{"axisPlacement":"left","reverse":false,"unit":"s"}},"pluginVersion":"10.0.0","targets":[{"expr":"sum by (le, workflow_id) (rate(copperiq_n8n_webhook_duration_seconds{namespace=\"$namespace\"}_bucket[5m]))","format":"heatmap","legendFormat":"{{workflow_id}}","refId":"A"}],"title":"Webhook Duration Heatmap","type":"heatmap"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Calls per workflow with success/error breakdown","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"auto","cellOptions":{"type":"auto"},"inspect":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"short"}},"gridPos":{"h":8,"w":24,"x":0,"y":22},"id":8,"options":{"cellHeight":"sm","footer":{"countRows":false,"fields":"","reducer":["sum"],"show":true},"showHeader":true,"sortBy":[{"desc":true,"displayName":"Total"}]},"pluginVersion":"10.0.0","targets":[{"expr":"sum by (workflow_id, status) (copperiq_n8n_webhook_calls_total{namespace=\"$namespace\"})","format":"table","instant":true,"refId":"A"}],"title":"Webhook Call Statistics by Workflow","transformations":[{"id":"organize","options":{"excludeByName":{"Time":true},"indexByName":{"workflow_id":0,"status":1,"Value":2},"renameByName":{"workflow_id":"Workflow","status":"Status","Value":"Count"}}},{"id":"groupBy","options":{"fields":{"Count":{"aggregations":["sum"],"operation":"aggregate"},"Status":{"aggregations":[],"operation":"groupby"},"Workflow":{"aggregations":[],"operation":"groupby"}}}}],"type":"table"}],"refresh":"30s","schemaVersion":38,"style":"dark","tags":["content-platform","n8n","integration"],"templating":{"list":[{"queryValue":"","multi":false,"type":"custom","label":"Environment","description":"Select Content Platform environment","options":[{"value":"content-platform-accept","text":"content-platform-accept","selected":true},{"value":"content-platform-prod","text":"content-platform-prod","selected":false}],"includeAll":false,"query":"content-platform-accept,content-platform-prod","skipUrlSync":false,"name":"namespace","hide":0,"current":{"value":"content-platform-accept","text":"content-platform-accept","selected":false}},{"current":{"value":["$__all"],"text":["All"],"selected":true},"definition":"label_values(copperiq_n8n_webhook_calls_total{namespace=\\\"$namespace\\\"}, workflow_id)","query":{"refId":"StandardVariableQuery","query":"label_values(copperiq_n8n_webhook_calls_total{namespace=\\\"$namespace\\\"}, workflow_id)"},"refresh":1,"label":"Workflow","name":"workflow_id","type":"query","hide":0,"includeAll":true,"multi":true,"options":[],"regex":"","datasource":{"type":"prometheus","uid":"prometheus"},"skipUrlSync":false,"sort":1}]},"time":{"from":"now-24h","to":"now"},"timepicker":{},"timezone":"","title":"Content Platform - N8N Integration","uid":"content-platform-n8n","version":1,"weekStart":"","meta":{"folderTitle":"Content Platform"}}