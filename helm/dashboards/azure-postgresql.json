{"annotations":{"list":[{"builtIn":1,"datasource":{"type":"grafana","uid":"-- Grafana --"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"editable":true,"fiscalYearStartMonth":0,"graphTooltip":1,"id":null,"links":[{"asDropdown":false,"icon":"dashboard","includeVars":true,"keepTime":true,"tags":[],"targetBlank":false,"title":"Back to Overview","type":"link","url":"/d/infrastructure-overview"}],"liveNow":false,"panels":[{"datasource":{"type":"grafana-azure-monitor-datasource","uid":"P1EB995EACC6832D3"},"description":"CPU utilization percentage (80% warning, 90% critical)","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":80},{"color":"red","value":90}]},"unit":"percent"}},"gridPos":{"h":8,"w":6,"x":0,"y":0},"id":1,"options":{"orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":true,"showThresholdMarkers":true},"pluginVersion":"10.0.0","targets":[{"azureMonitor":{"metricName":"cpu_percent","metricNamespace":"microsoft.dbforpostgresql/flexibleservers","aggregation":"Average","timeGrain":"auto","resources":[{"resourceGroup":"$resource_group","resourceName":"$server_name"}],"allowedTimeGrainsMs":[]},"queryType":"Azure Monitor","refId":"A"}],"title":"CPU Usage","type":"gauge"},{"datasource":{"type":"grafana-azure-monitor-datasource","uid":"P1EB995EACC6832D3"},"description":"Memory utilization percentage (80% warning, 90% critical)","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":80},{"color":"red","value":90}]},"unit":"percent"}},"gridPos":{"h":8,"w":6,"x":6,"y":0},"id":2,"options":{"orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":true,"showThresholdMarkers":true},"pluginVersion":"10.0.0","targets":[{"azureMonitor":{"metricName":"memory_percent","timeGrain":"auto","metricNamespace":"microsoft.dbforpostgresql/flexibleservers","aggregation":"Average","resources":[{"resourceGroup":"$resource_group","resourceName":"$server_name"}],"allowedTimeGrainsMs":[]},"queryType":"Azure Monitor","refId":"A"}],"title":"Memory Usage","type":"gauge"},{"datasource":{"type":"grafana-azure-monitor-datasource","uid":"P1EB995EACC6832D3"},"description":"Storage utilization percentage (80% warning, 90% critical)","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":80},{"color":"red","value":90}]},"unit":"percent"}},"gridPos":{"h":8,"w":6,"x":12,"y":0},"id":3,"options":{"orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":true,"showThresholdMarkers":true},"pluginVersion":"10.0.0","targets":[{"azureMonitor":{"metricName":"storage_percent","timeGrain":"auto","metricNamespace":"microsoft.dbforpostgresql/flexibleservers","aggregation":"Average","resources":[{"resourceGroup":"$resource_group","resourceName":"$server_name"}],"allowedTimeGrainsMs":[]},"queryType":"Azure Monitor","refId":"A"}],"title":"Storage Usage","type":"gauge"},{"datasource":{"type":"grafana-azure-monitor-datasource","uid":"P1EB995EACC6832D3"},"description":"Active connections (80% warning, 90% critical)","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":80},{"color":"red","value":90}]},"unit":"percent"}},"gridPos":{"h":8,"w":6,"x":18,"y":0},"id":4,"options":{"orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":true,"showThresholdMarkers":true},"pluginVersion":"10.0.0","targets":[{"azureMonitor":{"metricName":"active_connections","timeGrain":"auto","metricNamespace":"microsoft.dbforpostgresql/flexibleservers","aggregation":"Average","resources":[{"resourceGroup":"$resource_group","resourceName":"$server_name"}],"allowedTimeGrainsMs":[]},"queryType":"Azure Monitor","refId":"A"}],"title":"Active Connections","type":"gauge"},{"datasource":{"type":"grafana-azure-monitor-datasource","uid":"P1EB995EACC6832D3"},"description":"CPU usage trend over time","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":20,"gradientMode":"none","hideFrom":{"tooltip":false,"viz":false,"legend":false},"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"line"}},"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":80},{"color":"red","value":90}]},"unit":"percent"}},"gridPos":{"h":8,"w":12,"x":0,"y":8},"id":5,"options":{"legend":{"calcs":["lastNotNull","max","mean"],"displayMode":"table","placement":"bottom","showLegend":true},"tooltip":{"mode":"single","sort":"none"}},"pluginVersion":"10.0.0","targets":[{"azureMonitor":{"metricName":"cpu_percent","timeGrain":"auto","metricNamespace":"microsoft.dbforpostgresql/flexibleservers","aggregation":"Average","resources":[{"resourceGroup":"$resource_group","resourceName":"$server_name"}],"allowedTimeGrainsMs":[]},"queryType":"Azure Monitor","refId":"A"}],"title":"CPU Utilization Over Time","type":"timeseries"},{"datasource":{"type":"grafana-azure-monitor-datasource","uid":"P1EB995EACC6832D3"},"description":"Memory usage trend over time","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":20,"gradientMode":"none","hideFrom":{"tooltip":false,"viz":false,"legend":false},"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"line"}},"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":80},{"color":"red","value":90}]},"unit":"percent"}},"gridPos":{"h":8,"w":12,"x":12,"y":8},"id":6,"options":{"legend":{"calcs":["lastNotNull","max","mean"],"displayMode":"table","placement":"bottom","showLegend":true},"tooltip":{"mode":"single","sort":"none"}},"pluginVersion":"10.0.0","targets":[{"azureMonitor":{"metricName":"memory_percent","timeGrain":"auto","metricNamespace":"microsoft.dbforpostgresql/flexibleservers","aggregation":"Average","resources":[{"resourceGroup":"$resource_group","resourceName":"$server_name"}],"allowedTimeGrainsMs":[]},"queryType":"Azure Monitor","refId":"A"}],"title":"Memory Utilization Over Time","type":"timeseries"},{"datasource":{"type":"grafana-azure-monitor-datasource","uid":"P1EB995EACC6832D3"},"description":"Network throughput (IO + egress)","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"tooltip":false,"viz":false,"legend":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"binBps"}},"gridPos":{"h":8,"w":12,"x":0,"y":16},"id":7,"options":{"legend":{"calcs":["mean","max"],"displayMode":"table","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"10.0.0","targets":[{"azureMonitor":{"metricName":"network_bytes_ingress","timeGrain":"auto","metricNamespace":"microsoft.dbforpostgresql/flexibleservers","aggregation":"Average","resources":[{"resourceGroup":"$resource_group","resourceName":"$server_name"}],"allowedTimeGrainsMs":[]},"queryType":"Azure Monitor","refId":"A"},{"azureMonitor":{"metricName":"network_bytes_egress","timeGrain":"auto","metricNamespace":"microsoft.dbforpostgresql/flexibleservers","aggregation":"Average","resources":[{"resourceGroup":"$resource_group","resourceName":"$server_name"}],"allowedTimeGrainsMs":[]},"queryType":"Azure Monitor","refId":"B"}],"title":"Network Throughput","type":"timeseries"},{"datasource":{"type":"grafana-azure-monitor-datasource","uid":"P1EB995EACC6832D3"},"description":"Connection count over time","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"Connections","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"tooltip":false,"viz":false,"legend":false},"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"short"}},"gridPos":{"h":8,"w":12,"x":12,"y":16},"id":8,"options":{"legend":{"calcs":["lastNotNull","max","mean"],"displayMode":"table","placement":"bottom","showLegend":true},"tooltip":{"mode":"single","sort":"none"}},"pluginVersion":"10.0.0","targets":[{"azureMonitor":{"metricName":"active_connections","timeGrain":"auto","metricNamespace":"microsoft.dbforpostgresql/flexibleservers","aggregation":"Average","resources":[{"resourceGroup":"$resource_group","resourceName":"$server_name"}],"allowedTimeGrainsMs":[]},"queryType":"Azure Monitor","refId":"A"}],"title":"Active Connections Over Time","type":"timeseries"},{"datasource":{"type":"grafana-azure-monitor-datasource","uid":"P1EB995EACC6832D3"},"description":"IOPS (reads + writes)","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"IOPS","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"tooltip":false,"viz":false,"legend":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"iops"}},"gridPos":{"h":8,"w":12,"x":0,"y":24},"id":9,"options":{"legend":{"calcs":["mean","max"],"displayMode":"table","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"10.0.0","targets":[{"azureMonitor":{"metricName":"iops","timeGrain":"auto","metricNamespace":"microsoft.dbforpostgresql/flexibleservers","aggregation":"Average","resources":[{"resourceGroup":"$resource_group","resourceName":"$server_name"}],"allowedTimeGrainsMs":[]},"queryType":"Azure Monitor","refId":"A"}],"title":"Disk IOPS","type":"timeseries"},{"datasource":{"type":"grafana-azure-monitor-datasource","uid":"P1EB995EACC6832D3"},"description":"Storage used vs available","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":20,"gradientMode":"none","hideFrom":{"tooltip":false,"viz":false,"legend":false},"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"decbytes"}},"gridPos":{"h":8,"w":12,"x":12,"y":24},"id":10,"options":{"legend":{"calcs":["lastNotNull","max"],"displayMode":"table","placement":"bottom","showLegend":true},"tooltip":{"mode":"single","sort":"none"}},"pluginVersion":"10.0.0","targets":[{"azureMonitor":{"metricName":"storage_used","timeGrain":"auto","metricNamespace":"microsoft.dbforpostgresql/flexibleservers","aggregation":"Average","resources":[{"resourceGroup":"$resource_group","resourceName":"$server_name"}],"allowedTimeGrainsMs":[]},"queryType":"Azure Monitor","refId":"A"}],"title":"Storage Usage (Bytes)","type":"timeseries"}],"refresh":"30s","schemaVersion":38,"style":"dark","tags":["copperiq","azure","postgresql","database"],"templating":{"list":[{"current":{"selected":false,"text":"Azure Monitor","value":"Azure Monitor"},"hide":0,"includeAll":false,"label":"Azure Monitor Datasource","multi":false,"name":"DS_AZURE_MONITOR","options":[],"query":"grafana-azure-monitor-datasource","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"},{"current":{"selected":false,"text":"shared-hosting-accept-prod","value":"shared-hosting-accept-prod"},"hide":0,"label":"Resource Group","name":"resource_group","options":[{"selected":true,"text":"shared-hosting-accept-prod","value":"shared-hosting-accept-prod"}],"query":"shared-hosting-accept-prod","skipUrlSync":false,"type":"custom"},{"current":{"selected":false,"text":"copperiq-accept-prod","value":"copperiq-accept-prod"},"hide":0,"label":"Server Name","name":"server_name","options":[{"selected":true,"text":"copperiq-accept-prod","value":"copperiq-accept-prod"}],"query":"copperiq-accept-prod","skipUrlSync":false,"type":"custom"}]},"time":{"from":"now-1h","to":"now"},"timepicker":{},"timezone":"Europe/Amsterdam","title":"Azure PostgreSQL","uid":"azure-postgresql","version":1,"weekStart":"monday","folderUid":"databases","meta":{"folderTitle":"Databases"}}